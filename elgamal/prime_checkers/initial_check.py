carmichael_numbers = [
    561, 1105, 1729, 2465, 2821, 6601, 8911, 10585, 15841, 29341,
    41041, 46657, 52633, 62745, 63973, 75361, 101101, 115921, 126217, 162401,
    172081, 188461, 252601, 278545, 294409, 314821, 334153, 340561, 399001, 410041,
    449065, 488881, 512461, 530881, 552721, 656601, 658801, 670033, 748657, 825265,
    838201, 852841, 997633, 1033669, 1050985, 1082809, 1569457, 1773289, 2100901, 2113921,
    2433601, 2455921, 2944657, 2953129, 3006733, 3341521, 3400577, 3409177, 3828001, 4046257,
    4494281, 4880161, 4978561, 5128201, 5307121, 5527621, 6566221, 6588001, 6700337, 7486561,
    8252581, 8381857, 8528201, 9177841, 10402561, 11156641, 11580241, 12000577, 12073681, 12462601,
    12541057, 13365001, 13682401, 16054729, 16307689, 17732929, 18966561, 19115881, 20154809, 21221161,
    22722913, 25080113, 24469381, 24591121, 25721377, 26543377, 27034313, 31431249, 32598641, 32891113
]

def initial_check(f):
    def wrapper(*args, **kwargs):
        if n := kwargs.get('n') is None:
            n = args[1]
        if n in carmichael_numbers:
            return False
        if n in (2, 3):
            return True
        if n < 2 or n % 2 == 0:
            return False
        return f(*args, **kwargs)
    return wrapper